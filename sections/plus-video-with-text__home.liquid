{% comment %} ------------ Start: plus-video-with-text v4 ----------- {% endcomment %} {% comment %} Create section id liquid variable that can be used in javascript i.e. function name, variable name etc. {% endcomment %}  {%- assign sectionIdjs = section.id | replace: '-', '_' -%}      {% if section.settings.play_in_lightbox == true %}  <style>   /* class used to play video in lightbox - used by mp4, youtube, and vimeo */   .lightbox__{{ section.id }} {      background-color: rgba(0,0,0,0.8);      overflow: scroll;      position: fixed;      display: none;      z-index: 10;      bottom: 0;      right: 0;      left: 0;      top: 0;    }       .lightbox-container__{{ section.id }} {      position: relative;      max-width: 960px;      margin: 7% auto;      display: block;      padding: 0 3%;      height: auto;      z-index: 11;    }      @media screen and (max-width: 768px) {      .lightbox-container__{{ section.id }} {        margin-top: 10%;      }   }     @media screen and (max-width: 414px) {      .lightbox-container__{{ section.id }} {        margin-top: 13%;      }   }    .lightbox-content__{{ section.id }} {      /* box-shadow: 0 1px 6px black; */    }      .lightbox-close__{{ section.id }} {      text-transform: uppercase;      background: transparent;      position: absolute;      font-weight: 300;      font-size: 12px;      display: block;      border: none;      color: white;      top: -22px;      right: 3%;    }     .video-container__{{ section.id }} {      padding-bottom: 56.25%;      position: relative;       padding-top: 30px;      overflow: hidden;      height: 0;    }    .video-container__{{ section.id }} iframe,    .video-container__{{ section.id }} object,    .video-container__{{ section.id }} video,    .video-container__{{ section.id }} embed {        position: absolute;        height: 100%;        width: 100%;        left: 0;        top: 0;    } </style> {% endif %}  {% comment %}    Render script to show/hide mp4 video in lightbox. This script will be used for both,   i.e. user entered mp4 url or default mp4 url (if not entered by user) {% endcomment %}  {% if section.settings.video_type == 'mp4' and section.settings.play_in_lightbox == true %} <script>   /* Play mp4 video in lightbox - {{ section.id }} */    /* Show lightbox */   function showVideo_{{ sectionIdjs }}() {     const videoFameId = 'iframe-{{ section.id }}';     const divId = 'modal-{{ section.id }}';     /* console.log('showVideo() divId:', divId, 'videoFameId:', videoFameId); */      /* Grab video element from lightbox and play it */     const videoEl = document.querySelector('#' + videoFameId);      const promise = videoEl.play();      promise.then( _ => { /* Autoplay started! */        /* console.log('mp4 Video Played.'); */     }).catch( error => { /* Autoplay was prevented. */       console.log('mp4 Video Play error:', error );      });           document.getElementById(divId).style.display = 'block';   }    /* Hide lightbox */   function hideVideo_{{ sectionIdjs }}() {      const videoFameId = 'iframe-{{ section.id }}';      const divId = 'modal-{{ section.id }}';      /* console.log('hideVideo() divId:', divId, 'videoFameId:', videoFameId); */      /* Grab video element from lightbox and pause it */     const videoEl = document.querySelector('#' + videoFameId);      videoEl.pause();      /* console.log('mp4 Video Paused'); */      document.getElementById(divId).style.display = 'none';     } </script> {% endif %}   {% comment %}    If youtube/vimeo radio selected, but url not entered then render below functions.   i.e. If user not enter any url for youtube/vimeo radio selection then we will   render default youtube video in lightbox. {% endcomment %}  {% if section.settings.video_type == 'yt_vimeo' and section.settings.video_url == nil and section.settings.play_in_lightbox == true %} <script>   /* Play youtube video in lightbox - {{ section.id }} */      /* Show lightbox */   function showVideo_{{ sectionIdjs }}() {     const videoFameId = 'iframe-{{ section.id }}';      const divId = 'modal-{{ section.id }}';      /* console.log('showVideo() divId:', divId, 'videoFameId:', videoFameId); */      const video = document.getElementById(videoFameId).src;      document.getElementById(videoFameId).src = video+'&autoplay=1'; /* adding autoplay to the URL */     document.getElementById(divId).style.display = 'block';    }    /* Hide lightbox */   function hideVideo_{{ sectionIdjs }}() {      const videoFameId = 'iframe-{{ section.id }}';      const divId = 'modal-{{ section.id }}';      /* console.log('hideVideo() divId:', divId, 'videoFameId:', videoFameId); */      const video = document.getElementById(videoFameId).src;      const cleaned = video.replace('&autoplay=1',''); /* removing autoplay from url */      document.getElementById(videoFameId).src = cleaned;      document.getElementById(divId).style.display = 'none';    } </script> {% endif %}   {% comment %} Render script to show/hide youtube video in lightbox {% endcomment %} {% if section.settings.video_type == 'yt_vimeo' and section.settings.video_url.type == 'youtube' and section.settings.play_in_lightbox == true %} <script>   /* Play youtube video in lightbox - {{ section.id }} */      /* Show lightbox */   function showVideo_{{ sectionIdjs }}() {      const videoFameId = 'iframe-{{ section.id }}';      const divId = 'modal-{{ section.id }}';      /* console.log('showVideo() divId:', divId, 'videoFameId:', videoFameId); */      const video = document.getElementById(videoFameId).src;      document.getElementById(videoFameId).src = video+'&autoplay=1'; /* adding autoplay to the URL */     document.getElementById(divId).style.display = 'block';    }    /* Hide lightbox */   function hideVideo_{{ sectionIdjs }}() {      const videoFameId = 'iframe-{{ section.id }}';      const divId = 'modal-{{ section.id }}';      /* console.log('hideVideo() divId:', divId, 'videoFameId:', videoFameId); */      const video = document.getElementById(videoFameId).src;      const cleaned = video.replace('&autoplay=1',''); /* removing autoplay from url */      document.getElementById(videoFameId).src = cleaned;      document.getElementById(divId).style.display = 'none';    } </script> {% endif %}   {% comment %} Render script to show/hide Vimeo video in lightbox {% endcomment %}  {% if section.settings.video_type == 'yt_vimeo' and section.settings.video_url.type == 'vimeo' and section.settings.play_in_lightbox == true %} <script>   /* Play vimeo video in lightbox - {{ section.id }} */     /* Function to show lightbox */   function showVideo_{{ sectionIdjs }}() {     const videoFameId = 'iframe-{{ section.id }}';     const divId = 'modal-{{ section.id }}';     /* console.log('showVideo() divId:', divId, 'videoFameId:', videoFameId); */      const video = document.getElementById(videoFameId).src;     document.getElementById(videoFameId).src = video + '&autoplay=1';  /* add auto play to url */     document.getElementById(divId).style.display = 'block';   }    /* Hide lightbox */   function hideVideo_{{ sectionIdjs }}() {     const videoFameId = 'iframe-{{ section.id }}';     const divId = 'modal-{{ section.id }}';     /* console.log('hideVideo() divId:', divId, 'videoFameId:', videoFameId); */      const video = document.getElementById(videoFameId).src;     const cleaned = video.replace('&autoplay=1',''); /* removing autoplay from url */     document.getElementById(videoFameId).src = cleaned;     document.getElementById(divId).style.display = 'none';   }   </script> {% endif %}   {% comment %}    Render lightbox for mp4 video. If mp4 url not entered then it will show    default mp4 url, otherwise show user entered mp4 url. {% endcomment %} {% if section.settings.video_type == 'mp4' and section.settings.play_in_lightbox == true %} <div id="modal-{{ section.id }}" class="lightbox__{{ section.id }}" >    <div class="lightbox-container__{{ section.id }}">       <div class="lightbox-content__{{ section.id }}">       <button onclick="hideVideo_{{ sectionIdjs }}()" class="lightbox-close__{{ section.id }}">         Close &nbsp; | &nbsp; ✕       </button>       <div class="video-container__{{ section.id }}">         <video             id="iframe-{{ section.id }}"           controls=true            style="width: 100%; object-fit: cover;"            {% if section.settings.video_image %}            poster="https:{{ section.settings.video_image | img_url: '1920x1080', crop: 'center' }}"            {% endif %}          >            {% if section.settings.mp4_url == '' %}             <source src="https://cdn.shopify.com/s/files/1/0248/2113/7485/files/Street_-_19627.mp4" type="video/mp4" >           {% else %}             <source src="{{ section.settings.mp4_url }}" type="video/mp4" >           {% endif %}          </video>       </div>     </div>   </div> </div> {% endif %}  {% comment %}    If youtube/vimeo radio selected, but url not entered then show default youtube video in lightbox. {% endcomment %} {% if section.settings.video_type == 'yt_vimeo' and section.settings.video_url == nil and section.settings.play_in_lightbox == true %} <div id="modal-{{ section.id }}" class="lightbox__{{ section.id }}" onclick="hideVideo_{{ sectionIdjs }}()">   <div class="lightbox-container__{{ section.id }}">       <div class="lightbox-content__{{ section.id }}">       <button onclick="hideVideo_{{ sectionIdjs }}()" class="lightbox-close__{{ section.id }}">         Close &nbsp; | &nbsp; ✕       </button>       <div class="video-container__{{ section.id }}">         <iframe            id="iframe-{{ section.id }}"            width="960" height="540"            src="https://www.youtube.com/embed/_WiVOWHemEE?rel=0&showinfo=0"           frameborder="0"            allowfullscreen         ></iframe>       </div>     </div>   </div> </div> {% endif %}  {% comment %} Render lightbox/modal for YouTube video (If youtube url entered) {% endcomment %} {% if section.settings.video_type == 'yt_vimeo' and section.settings.video_url.type == 'youtube' and section.settings.play_in_lightbox == true %} <div id="modal-{{ section.id }}" class="lightbox__{{ section.id }}" onclick="hideVideo_{{ sectionIdjs }}()">   <div class="lightbox-container__{{ section.id }}">       <div class="lightbox-content__{{ section.id }}">       <button onclick="hideVideo_{{ sectionIdjs }}()" class="lightbox-close__{{ section.id }}">         Close &nbsp; | &nbsp; ✕       </button>       <div class="video-container__{{ section.id }}">         <iframe            id="iframe-{{ section.id }}"            width="960" height="540"            src="https://www.youtube.com/embed/{{ section.settings.video_url.id }}?rel=0&showinfo=0"           frameborder="0"            allowfullscreen         ></iframe>       </div>     </div>   </div> </div> {% endif %}  {% comment %} Render lightbox/modal for Vimeo video (If vimeo url entered) {% endcomment %} {% if section.settings.video_type == 'yt_vimeo' and section.settings.video_url.type == 'vimeo' and section.settings.play_in_lightbox == true %} <div id="modal-{{ section.id }}" class="lightbox__{{ section.id }}" onclick="hideVideo_{{ sectionIdjs }}()">   <div class="lightbox-container__{{ section.id }}">       <div class="lightbox-content__{{ section.id }}">       <button onclick="hideVideo_{{ sectionIdjs }}()" class="lightbox-close__{{ section.id }}">         Close &nbsp; | &nbsp; ✕       </button>       <div class="video-container__{{ section.id }}">         <iframe            id="iframe-{{ section.id }}"            width="960" height="540"            src="https://player.vimeo.com/video/{{ section.settings.video_url.id }}?color={{ settings.color_secondary | remove: "#" }}&byline=0&portrait=0&badge=0"           frameborder="0"           webkitallowfullscreen            mozallowfullscreen             allowfullscreen         ></iframe>       </div>     </div>   </div> </div> {% endif %}   <div style="width: 100%; height: {{ section.settings.top_space }}px;"></div> <div class="plus-video-with-text"       style="margin: auto;             max-width: {{ section.settings.content_max_width }}px;             padding-left: {{ section.settings.content_left_right_padding }}px;             padding-right: {{ section.settings.content_left_right_padding }}px;             border: 0px solid #ff0000;             " >    {% capture mp4_video_default %}   <div style="position: relative; max-width: 100%; height: 0; height: auto;" >     <video        controls=true        style="width: 100%;object-fit: cover;"        {% if section.settings.video_image %}        poster="https:{{ section.settings.video_image | img_url: '1920x1080', crop: 'center' }}"        {% endif %}      >       <source src="https://cdn.shopify.com/s/files/1/0248/2113/7485/files/Street_-_19627.mp4" type="video/mp4" >     </video>     {% if section.settings.play_in_lightbox == true %}     <div        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,255,0); cursor: pointer; z-index:100"        onclick="showVideo_{{ sectionIdjs }}()"     >     </div>      {% endif %}   </div>   {% endcapture %}    {% capture mp4_video %}   <div style="position: relative; max-width: 100%; height: 0; height: auto;" >       <video          controls=true          style="width: 100%;object-fit: cover;"          {% if section.settings.video_image %}          poster="https:{{ section.settings.video_image | img_url: '1920x1080', crop: 'center' }}"          {% endif %}        >         <source src="{{ section.settings.mp4_url }}" type="video/mp4" >       </video>       {% if section.settings.play_in_lightbox == true %}       <div          style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,255,0); cursor: pointer; z-index:100"          onclick="showVideo_{{ sectionIdjs }}()"       >       </div>        {% endif %}   </div>   {% endcapture %}     {% capture youtube_video_default %} 	<div      class="video-wrapper"      style="position: relative;           overflow: hidden;           max-width: 100%;           padding-bottom: 56.25%;           height: 0;           height: auto;           ">       <iframe          src="https://www.youtube.com/embed/_WiVOWHemEE?rel=0&showinfo=0&vq=720"          width="850" height="480"          frameborder="0"          allowfullscreen          webkitallowfullscreen          mozallowfullscreen          style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"        ></iframe>       {% if section.settings.play_in_lightbox == true %}       <div          style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,255,0,0); cursor: pointer;"          onclick="showVideo_{{ sectionIdjs }}()"       >       </div>        {% endif %}     </div>   {% endcapture %}     {% capture youtube_video %}   <div      class="video-wrapper"      style="position: relative;           overflow: hidden;           max-width: 100%;           padding-bottom: 56.25%;           height: 0;           height: auto;           ">        <iframe          src="https://www.youtube.com/embed/{{ section.settings.video_url.id }}?rel=0&showinfo=0&vq=720"         width="850" height="480"          frameborder="0"          allowfullscreen          webkitallowfullscreen          mozallowfullscreen           style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"        ></iframe>        {% if section.settings.play_in_lightbox == true %}       <div          style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,255,0,0); cursor: pointer;"          onclick="showVideo_{{ sectionIdjs }}()"       >       </div>        {% endif %}   </div>   {% endcapture %}     {% capture vimeo_video_default %}   	<div class="video-wrapper"           style="position: relative;                 overflow: hidden;                 max-width: 100%;                 padding-bottom: 56.25%;                 height: 0; height: auto;                 ">       <iframe          src="//player.vimeo.com/video/592544019?color={{ settings.color_secondary | remove: "#" }}&byline=0&portrait=0&badge=0"         width="850" height="480"         frameborder="0"          allowfullscreen         webkitallowfullscreen          mozallowfullscreen           style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"       ></iframe>   	</div>   {% endcapture %}     {% capture vimeo_video %}   	<div class="video-wrapper"           style="position: relative;                 overflow: hidden;                 max-width: 100%;                 padding-bottom: 56.25%;                 height: 0; height: auto;                 ">       <iframe          src="https://player.vimeo.com/video/{{ section.settings.video_url.id }}?color={{ settings.color_secondary | remove: "#" }}&byline=0&portrait=0&badge=0"         width="850" height="480"         frameborder="0"          webkitallowfullscreen          mozallowfullscreen           allowfullscreen         style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; "       ></iframe>       {% if section.settings.play_in_lightbox == true %}       <div          style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(255,0,0,0); cursor: pointer;"          onclick="showVideo_{{ sectionIdjs }}()"       >       </div>        {% endif %}     </div>   {% endcapture %}     {% capture video_layout %}     <div {% if section.settings.video_type == 'yt_vimeo' %}          class="plus-video-with-text__video" 	       {% endif %}          style="flex: 50%;                 max-width: 100%;                 height: 0;                 height: auto;                 ">        {% if section.settings.video_type == 'mp4' and section.settings.mp4_url == blank %}           {{ mp4_video_default }}       {% endif %}        {% if section.settings.video_type == 'mp4' and section.settings.mp4_url != blank %}           {{ mp4_video }}       {% endif %}        {% if section.settings.video_type == 'yt_vimeo'           and section.settings.video_url == blank %} 	        {{ youtube_video_default }}       {% endif %}        {% if section.settings.video_type == 'yt_vimeo'           and section.settings.video_url != blank           and section.settings.video_url.type == "youtube" %}           {{ youtube_video }}       {% endif %}        {% if section.settings.video_type == 'yt_vimeo'           and section.settings.video_url != blank           and section.settings.video_url.type == "vimeo" %}           {{ vimeo_video }}       {% endif %}      </div>   {% endcapture %}     {% capture text_layout %} 	<div class="plus-video-with-text__text"          style="flex: 50%;                 margin-bottom: 5px;                 padding: 10px;                 padding-{{ section.settings.video_align }}: 20px;                 background-color: {{ section.settings.bg_color }};                 border: 0px solid #0000ff;                 ">       {% unless section.settings.title == '' %}       <h2 style="text-transform: none; text-align: {{ section.settings.text_align }};">         {{ section.settings.title | escape }}       </h2>       {% endunless %}       {% unless section.settings.desc == '' %}       <div style="text-align: {{ section.settings.text_align }};" >         {{ section.settings.desc }}       </div>       {% endunless %}       {% unless section.settings.button_text == '' %}       <div style="text-align: {{ section.settings.text_align }};" >         <a class="btn button__{{ section.id }}"              href="{{ section.settings.button_link | escape }}"          >           {{ section.settings.button_text | escape }}         </a>       </div>       {% endunless %}     </div>   {% endcapture %}     <div class="plus-video-with-text__row" style="display: flex; flex-wrap: wrap;">      {% if section.settings.video_align == 'left' %}       {{ video_layout }}     {% endif %}      {{ text_layout }}      {% if section.settings.video_align == 'right' %}       {{ video_layout }}     {% endif %}   </div>  </div>  <div style="width: 100%; height: {{ section.settings.bottom_space }}px;"></div>  <style>   /* Button - desktop screen  */   a.button__{{ section.id }} {     background: {{ section.settings.button_bg_color }};      color: {{ section.settings.button_text_color }};     {% unless section.settings.button_custom_settings == false %}       font-size: {{ section.settings.button_font_size }}px;       padding: {{ section.settings.button_text_padding }}px;       border-radius: {{ section.settings.button_corner_radius }}px;     {% endunless %}   }     /* Button - If custom button settings true then set mouse over effect */   {% unless section.settings.button_custom_settings == false %}   a.button__{{ section.id }}:hover {     background: {{ section.settings.button_bg_color }};      color: {{ section.settings.button_text_color }};    }    {% endunless %}    /* Responsive layout - when the screen is less than 750px wide,   make the two columns stack on top of each other instead of next to   each other */   @media screen and (max-width: 750px) {      .plus-video-with-text {       padding-left: 22px !important;       padding-right: 22px !important;     }      .plus-video-with-text__row {       flex-direction: column;     }      .plus-video-with-text__video {       padding-bottom: 56.25%;     }      .plus-video-with-text__text {       padding-top: 10px;       padding-bottom: 10px;       padding-left: 0px !important;       padding-right: 0px !important;     }      /* Button - mobile screen  */     a.button__{{ section.id }} {       padding: 8px;       background: {{ section.settings.button_bg_color }};        color: {{ section.settings.button_text_color }};        {% unless section.settings.button_custom_settings == false %}         font-size: {{ section.settings.button_font_size | times: 0.7 }}px;          border-radius: {{ section.settings.button_corner_radius }}px;       {% endunless %}     }    } </style>  {% schema %} {   "name": "Plus - Video with text",   "settings": [         {           "type": "header",           "content": "Video"         },         {           "type": "radio",           "id": "video_type",           "label": "Use Video Url",           "options": [             { "value": "mp4", "label": "Mp4" },             { "value": "yt_vimeo", "label": "YouTube/Vimeo"}           ],           "info": "Please enter appropriate video url within text field shown below."         },         {           "type": "text",           "id": "mp4_url",           "label": "Video URL (mp4)",           "placeholder": "Enter mp4 url"         },         {           "id": "video_url",           "type": "video_url",           "label": "Video URL (YouTube/Vimeo)",           "accept": ["youtube", "vimeo"],           "placeholder": "Enter youtube/vimeo url"         },         {           "type": "select",           "id": "video_align",           "label": "Video Alignment",           "default": "left",           "options": [             { "value": "left", "label": "Align Left" },             { "value": "right", "label": "Align Right"}           ]         },         {           "type": "header",           "content": "Preview Image"         },         {           "type": "image_picker",           "id": "video_image",           "label": "Video Preview Image",           "info": "Image set as .mp4 video thumbnail"         },         {           "type": "header",           "content": "Lightbox"         },         {           "type": "checkbox",           "id": "play_in_lightbox",           "default": false,           "label": "Play Video in Lightbox",           "info": "If checked, video will play in lightbox instead of inline."         },         {           "type": "header",           "content": "Text"         },         {           "type": "text",           "id": "title",           "label": "Heading",           "default": "Plus - Video With Text"         },         {           "type": "richtext",           "id": "desc",           "label": "Description",           "default": "<p>Description text will come here. Description text will come here.</p>"         },         {           "type": "select",           "id": "text_align",           "label": "Text Align (Heading, Desc, Button)",           "default": "left",           "options": [             { "value": "left", "label": "Left" },             { "value": "center", "label": "Center" },             { "value": "right", "label": "Right"}           ]         },         {           "type": "color",           "id": "bg_color",           "label": "Background color",           "default": "rgba(0,0,0,0)"         },         {           "type": "header",           "content": "Button"         },         {           "type": "text",           "id": "button_text",           "label": "Button text",           "info": "e.g. View more, View Products etc."         },         {           "type": "url",           "id": "button_link",           "label": "Button link"         },         {           "type": "color",           "id": "button_bg_color",           "label": "Button bg color",           "default": "#1C1D1D"         },         {           "type": "color",           "id": "button_text_color",           "label": "Button text color",           "default": "#ffffff"         },         {           "type": "checkbox",           "id": "button_custom_settings",           "default": false,           "label": "Apply custom settings",           "info": "If your theme does not support default btn style then enable to apply below settings."         },         {           "type": "range",           "id": "button_font_size",           "min": 1,           "max": 40,           "step": 1,           "label": "Button text size",           "default": 12         },         {           "type": "range",           "id": "button_text_padding",           "min": 0,           "max": 40,           "step": 1,           "label": "Button text padding",           "default": 10         },         {           "type": "range",           "id": "button_corner_radius",           "min": 0,           "max": 20,           "step": 1,           "label": "Button corner radius",           "default": 0         },         {           "type": "header",           "content": "Section Config"         },         {           "type": "range",           "id": "content_max_width",           "min": 100,           "max": 2000,           "step": 50,           "unit": "px",           "label": "Section Maximum Width",           "default": 1200         },         {           "type": "range",           "id": "content_left_right_padding",           "min": 0,           "max": 500,           "step": 5,           "unit": "px",           "label": "Section Left/Right padding",           "default": 55         },         {           "type": "range",           "id": "top_space",           "min": 0,           "max": 200,           "step": 5,           "unit": "px",           "label": "Space before section",           "default": 0         },         {           "type": "range",           "id": "bottom_space",           "min": 0,           "max": 200,           "step": 5,           "unit": "px",           "label": "Space after section",           "default": 0         }     ],       "presets": [       {         "name": "Plus - Video with text",         "category": {           "de": "Creative Sections(PlusPage)",           "en": "Creative Sections(PlusPage)",           "fi": "Creative Sections(PlusPage)",           "fr": "Creative Sections(PlusPage)"         }       }     ]    } {% endschema %}  {% stylesheet %} {% endstylesheet %}  {% javascript %} {% endjavascript %} {% comment %} ------------ End: plus-video-with-text v4 ----------- {% endcomment %}